{"version":3,"sources":["uni-app:///main.js",null,"webpack:///E:/Code_Me/Webman/busInto/RedDot-Bus-main/uniapp/pages/show-map/ShowMap.vue?34b2","webpack:///E:/Code_Me/Webman/busInto/RedDot-Bus-main/uniapp/pages/show-map/ShowMap.vue?b96f","webpack:///E:/Code_Me/Webman/busInto/RedDot-Bus-main/uniapp/pages/show-map/ShowMap.vue?6fa1","uni-app:///pages/show-map/ShowMap.vue","webpack:///E:/Code_Me/Webman/busInto/RedDot-Bus-main/uniapp/pages/show-map/ShowMap.vue?58cf","webpack:///E:/Code_Me/Webman/busInto/RedDot-Bus-main/uniapp/pages/show-map/ShowMap.vue?5051"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,mG;AACAA,UAAU,CAACC,gBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoH;AACpH;AAC2D;AACL;AACa;;;AAGnE;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,kFAAM;AACR,EAAE,2FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAimB,CAAgB,2nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC4BrnB;AACA;AACA;AACA,S;AACA;AACA,MADA,kBACA;AACA;AACA,cADA;AAEA,qBAFA;AAGA,mBAHA;;AAKA,kBALA;AAMA,mBANA;AAOA;AACA,aADA;AAEA,2BAFA;AAGA,6BAHA;AAIA,yBAJA,GAPA;;AAaA;AACA,2BADA;AAEA,6BAFA;AAGA,6CAHA;AAIA;AACA,2BADA;AAEA,6BAFA;AAGA,6CAHA,EAJA,CAbA;;;AAuBA,GAzBA;AA0BA,QA1BA,oBA0BA;AACA;AACA;AACA;AACA;AACA;AACA,gDADA;;;AAIA,GAnCA;AAoCA;AACA;AACA;AACA,KAHA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;;AAEA,OARA,EAQA;AACA;AACA;AACA,OAXA;;AAaA,KAtBA;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAhCA;AAiCA;AACA;AACA;AACA,mBADA;AAEA,wBAFA;AAGA,qBAHA;AAIA;AACA,gCADA;AAEA,kCAFA,EAJA;;AAQA,oBARA,0BAQA;AACA;AACA,SAVA;;AAYA,KA/CA;AAgDA;AACA;AACA;AACA;AACA;AACA;AACA,0BADA,EACA;AACA,4BAFA,EAEA;AACA;AACA;AACA,WALA;AAMA;AACA;AACA,WARA;;AAUA,OAZA;AAaA;;AAEA,KAlEA;AAmEA;AACA,oBApEA,8BAoEA;AACA;AACA,mCADA;AAEA,eAFA,qBAEA;AACA;AACA,SAJA;AAKA,YALA,kBAKA;AACA;AACA;AACA,SARA;;AAUA,KA/EA;AAgFA;AACA,mBAjFA,6BAiFA;AACA;AACA,qBADA;AAEA,eAFA,mBAEA,GAFA,EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAdA;;AAgBA,KAlGA;;AAoGA;AACA;AACA,eAtGA,yBAsGA;AACA;AACA,yBADA;AAEA,mCAFA;AAGA;AACA;AACA,8BADA,CACA;AACA,WAFA,MAEA;AACA;AACA,sCADA;AAEA,0BAFA;AAGA,4BAHA;;AAKA;AACA,SAbA;;AAeA,KAtHA;;;;;AA2HA;AACA;AACA;AACA;AACA;AACA;AACA,KAjIA;AAkIA;AACA;AACA;AACA;AACA;AACA,SAJA;;AAMA,KAzIA;AA0IA;AACA;AACA;AACA,6BADA;;AAGA,KA/IA;AAgJA;AACA;;AAEA,KAnJA;AAoJA,YApJA,sBAoJA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,oCAXA,CAWA;AACA,4CAZA,CAYA;AACA,6CAbA,CAaA;AACA,yDAdA,CAcA;AACA;AACA,gBADA;;AAGA,KAtKA,EApCA,E;;;;;;;;;;;;;AChCA;AAAA;AAAA;AAAA;AAAm3B,CAAgB,o3BAAG,EAAC,C;;;;;;;;;;;ACAv4B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/show-map/ShowMap.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/show-map/ShowMap.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./ShowMap.vue?vue&type=template&id=ff31aa16&\"\nvar renderjs\nimport script from \"./ShowMap.vue?vue&type=script&lang=js&\"\nexport * from \"./ShowMap.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ShowMap.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/show-map/ShowMap.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./ShowMap.vue?vue&type=template&id=ff31aa16&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./ShowMap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./ShowMap.vue?vue&type=script&lang=js&\"","<template>\n    <view class=\"content\">\n        <view class=\"top\">\n            <input type=\"text\" placeholder=\"请输入出发地点\" :value=\"searchKey\" @input=\"search\" class=\"searchIn\"/>\n            <scroll-view scroll-y=\"true\" class=\"option\" v-show=\"IsOption\">\n                <view class='column_item' v-for='(item,index) in data' :key='index' @click=\"tapOption(item)\" >{{item.title}}</view>\n            </scroll-view>\r\n\t\t\t\r\n\t\t\t\t<button  @click=\"backInfo\" class=\"backTo\">确定</button>\n        </view>\n        <view >\n            <view class=\"page-section page-section-gap\">\n              <map\n                id=\"myMap\"\n                style=\"width: 100%; height: 280px;\"\n                :latitude=\"latitude\"\n                :longitude=\"longitude\"\n                :markers=\"markers\"\n                :covers=\"covers\"\n                 @poitap = \"poitap\"\n                show-location\n              ></map>\n            </view>\n        </view>\n    </view>\n</template>\n\n<script>\n    // 引入SDK核心类\n    var QQMapWX = require('../../common/qqmap/qqmap-wx-jssdk1.2/qqmap-wx-jssdk.min.js');\n    var qqmapsdk;\n    var self;\n    export default {\n        data() {\n            return {\n                data:[],\n                IsOption:false,\n                searchKey:\"\",\n                \n                latitude: '',\n                longitude:'',\n                    markers: [{\n                      id: 1,\n                      latitude: 23.099994,\n                      longitude: 113.324520,\n                      name: 'T.I.T 创意园'\n                    }],\n                    covers: [{\n                      latitude: 23.099994,\n                      longitude: 113.344520,\n                      iconPath: '../../static/img/home.png'\n                    }, {\n                      latitude: 23.099994,\n                      longitude: 113.304520,\n                      iconPath: '../../static/img/home.png'\n                    }],\n            }\n        },\n        onLoad() {\n            self = this\n            self.mapCtx = wx.createMapContext('myMap')\n            self.getAuthorizeInfo()\n                 // 实例化API核心类\n                 qqmapsdk = new QQMapWX({\n                            key: 'BRNBZ-KY7Y4-FXYUP-X3KHF-XK5CT-FTBKZ'\n                        });\n                    \n        },\n        methods: {\n                bindChange:function(e){\n                    console.log(e)\n                },\n                // 搜索框\n                  search:  function(e){\n                    console.log(e)\n                    self.searchKey = e.detail.value\n                    var location = self.latitude+\",\"+ self.longitude\n                     self.mapSearch(self.searchKey,location).then(res => {\n                                self.data = res.data\n                                if(self.searchKey && self.data.length){\n                                    self.IsOption = true\n                                }else{\n                                    self.IsOption = false\n                                }\n                                \n                            },error => {\n                                // self.$api.msg('请求失败')\n                                // console.log(error,\"aaaaaaaaaaa\");\n                        })\n                    \n                },\n                tapOption:function(item){\n                    self.searchKey = item.title\n                    self.IsOption = false\n                    self.data = []\n                    var obj = {}\n                    obj.latitude = item.location.lat;\n                    obj.longitude = item.location.lng;\n                    // console.log(item,\"danji\",obj)\n                    self.toLocation(obj)\n                },\n                toLocation:function(obj){\n                    self.mapCtx.moveToLocation(obj)\n                    self.mapCtx.translateMarker({\n                      markerId: 1,\n                      autoRotate: true,\n                      duration: 100,\n                      destination: {\n                        latitude:obj.latitude,\n                        longitude:obj.longitude,\n                      },\n                      animationEnd() {\n                        console.log('animation end')\n                      }\n                    })\n                },\n                // \n                 mapSearch:function(keyword,location){\n                console.log(keyword,location,\"keyword,location\")\n                    let promise = new Promise(function(resolve, reject) {\n                        // 调用接口\n                              qqmapsdk.search({\n                                    keyword: keyword,//搜索关键词\n                                    location:location ,  //设置周边搜索中心点\n                                  success: function (res) {\n                                     resolve(res)\n                                  },\n                                  fail: function (res) {\n                                     reject(res)\n                                  }\n                          });\n                    })\n                    return promise\n                      \n                },\n                // 位置授权\n                 getAuthorizeInfo(){\n                              uni.authorize({\n                                  scope: 'scope.userLocation',\n                                  success() { // 允许授权\n                                      self.getLocationInfo();\n                                  },\n                                  fail(){    // 拒绝授权\n                                      self.openConfirm();\n                                      console.log(\"你拒绝了授权，无法获得周边信息\")\n                                  }\n                              })\n                          },\n                          // 获取地理位置\n                getLocationInfo(){  \n                              uni.getLocation({\n                                  type: 'wgs84',\n                                  success (res) {\n                                      console.log(res,\"当前位置\");\n                                     self.toLocation(res)\n                                     self.latitude = res.latitude;\n                                     self.longitude = res.longitude;\n                                            // uni.openLocation({\n                                            //     latitude: latitude,\n                                            //     longitude: longitude,\n                                            //     success: function () {\n                                            //         console.log('success');\n                                            //     }\n                                            // })\n                                  }\n                              });\n                          },\n                  \n                          // 再次获取授权\n                          // 当用户第一次拒绝后再次请求授权\n                openConfirm(){\n                              uni.showModal({\n                                  title: '请求授权当前位置',\n                                  content: '需要获取您的地理位置，请确认授权',\n                                  success: (res)=> {\n                                      if (res.confirm) {\n                                          uni.openSetting();// 打开地图权限设置\n                                      } else if (res.cancel) {\n                                          uni.showToast({\n                                              title: '你拒绝了授权，无法获得周边信息',\n                                              icon: 'none',\n                                              duration: 1000\n                                          })\n                                      }\n                                  }\n                              });\n                 },\n                 \n                 \n                 \n                 \n                 poitap: function(e){\n                    console.log(e,\"poitap\")\n                    var obj = e.detail\n                    self.searchKey = obj.name\n                    // this.$api.msg(e)\n                    self.toLocation(obj)\n                 },\n                 getCenterLocation: function () {\n                    this.mapCtx.getCenterLocation({\n                      success: function(res){\n                        console.log(res.longitude)\n                        console.log(res.latitude)\n                      }\n                    })\n                  },\n                // 下一步\n                Next:function(){\n                    uni.navigateTo({\n                      url: './addFishpond2'\n                    })  \n                },\n                // 取消删除\n                Cancel:function(){\n                    \n                },\r\n\t\t\t\tbackInfo(){\r\n\t\t\t\t\t// console.log(this.searchKey)\r\n\t\t\t\t\t// let that=this;\r\n\t\t\t\t\t// var search_start=JSON.stringify(that.searchKey);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// // console.log(this.submitForm);\r\n\t\t\t\t\t// // console.log(search_start)\r\n\t\t\t\t\t// uni.navigateTo({\r\n\t\t\t\t\t// \t// url:'/pages/main/main?backData='+search_start\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t// })\r\n\t\t\t\t\tlet pages = getCurrentPages();  //获取所有页面栈实例列表\r\n\t\t\t\t\tlet nowPage = pages[ pages.length - 1];  //当前页页面实例\r\n\t\t\t\t\tlet prevPage = pages[ pages.length - 2 ];  //上一页页面实例\r\n\t\t\t\t\tprevPage.$vm.submitForm.slocation = this.searchKey;   //修改上一页data里面的searchVal参数值为1211\r\n\t\t\t\t\tuni.navigateBack({  //uni.navigateTo跳转的返回，默认1为返回上一级\r\n\t\t\t\t\t\tdelta: 1\r\n\t\t\t\t\t});\r\n\t\t\t\t}\n        }\n    }\n</script>\n\n<style>\n    .content {\n        background-color: #F1F1F1;\n        overflow: hidden;\n        min-height: 100vh;\n        color: #646464;\n        font-size:40rpx ;\n    }\n    .top>input{\n        height: 88rpx;\n        width: 524rpx;\n        margin: 40rpx auto 0;\n        padding:0 40rpx;\n        border: solid 2rpx #BEBEBE;\n    }\n    .option{\n        max-height: 300rpx;\n        width: 100%;\n    \n        line-height: 60rpx;\n        position: fixed;\n        top: 128rpx;\n        z-index: 99999;\n    }\n    .column_item{\n        padding:0 40rpx;\n        height: 60rpx;\n        width: 524rpx;\n        overflow: hidden;\n        margin:0rpx auto;\n        background-color: #fff;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n    }\n    .column_item:active{\n        background-color: #8F8F94;\n    }\n    \n    .page-section-gap{\n      box-sizing: border-box;\n      /* padding: 0 30rpx; */\n      margin: 30rpx auto;\n      width: 600rpx;\n    }\n    \n</style>\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./ShowMap.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./ShowMap.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1605794862310\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}